import{_ as N,u as U,c as C,r as ne,o as F,w as T,a as s,b as _,d as e,F as W,e as E,n as ve,t as u,f as M,g as c,h as b,i as d,j as i,k as $,l as f,m as he,p as me,q as j,v as L,s as H,x as q,y as ge}from"./index-DzPRMt4S.js";const ye={class:"bookShelfBox"},fe={class:"bookshelf"},xe={class:"books"},ke={class:"book-title"},Be={__name:"BookShelf",setup(g){const r=a=>{const p=[1,1];for(;;){const x=p[p.length-1]+p[p.length-2];if(x>a)break;p.push(x)}return p},t=U(),y=C(()=>t.books.finished||[]),v=ne([]),w=ne({}),n=(a,p,x)=>{let B=30+a.pages/1e3*50;B=Math.min(B,80);const S=150,h=Math.floor(Math.random()*(200-S+1)+S);return{width:`${B}px`,height:`${h}px`,backgroundColor:"#F2F2F5",transformOrigin:"bottom"}},o=()=>{v.splice(0,v.length,...r(y.value.length)),y.value.forEach((a,p)=>{w[a.isbn]||(w[a.isbn]=n(a))})};return F(()=>{t.loadBooks(),o()}),T(y,()=>{o()}),(a,p)=>(s(),_("div",ye,[e("div",fe,[e("div",xe,[(s(!0),_(W,null,E(y.value,(x,D)=>(s(),_("div",{key:x.isbn,class:"book",style:ve(w[x.isbn])},[e("span",ke,u(x.title),1)],4))),128))])])]))}},be=N(Be,[["__scopeId","data-v-54826f05"]]),I=g=>(H("data-v-fb6a8dac"),g=g(),q(),g),we={class:"DataBox",style:{display:"flex",gap:"32px","flex-direction":"row"}},Se={style:{display:"flex","align-items":"center"}},$e={class:"bookData"},Ce={style:{display:"flex","flex-direction":"column",gap:"24px"}},De={style:{display:"flex","flex-direction":"column",gap:"4px"}},Ve={class:"bookSubData"},Ie={style:{display:"flex","flex-direction":"row",gap:"16px"}},Me={style:{"padding-right":"12px","box-shadow":"5px 0 0 -3px #999"}},Te={key:0,style:{display:"flex","align-items":"center",gap:"8px",color:"#767676",position:"relative",left:"-4px"}},Ne={key:1,style:{width:"100%",display:"flex","align-items":"center","justify-content":"space-between",gap:"12px"}},Ue={style:{"white-space":"nowrap"}},je={key:0,class:"bookDetailTxt"},Le={class:"category-buttons mt-4"},We={style:{display:"flex","flex-direction":"column",gap:"6px",width:"100%"}},Ee={key:0,class:"rating",style:{display:"flex","flex-direction":"column",width:"100%",gap:"6px","margin-top":"32px"}},ze=I(()=>e("h4",{style:{color:"#999"}},"책의 평점을 남겨주세요.",-1)),Ae={class:"bookCustomBox",style:{display:"flex","flex-direction":"column",gap:"12px",width:"100%"}},Fe={class:"bookDayBox"},He={key:0,style:{flex:"1 1 0",display:"flex","flex-direction":"column",gap:"8px"}},qe=I(()=>e("h4",null,"독서 시작일",-1)),Pe={key:1,style:{flex:"1 1 0",display:"flex","flex-direction":"column",gap:"8px"}},Re=I(()=>e("h4",null,"독서 종료일",-1)),Qe={key:2,class:"selectDay",style:{width:"100px"}},Oe={key:3,class:"selectDay",style:{width:"100px"}},Ge={class:"commentBox",style:{padding:"0"}},Je={key:1,class:"bookDetailTxt"},Ke={class:"bookCustomTxt"},Xe={class:"bookDayBox"},Ye={key:0,class:"bookDay"},Ze=I(()=>e("h4",null,"독서 시작일",-1)),et={class:"selectDay"},tt={key:1,class:"bookDay"},ot=I(()=>e("h4",null,"독서 종료일",-1)),lt={class:"selectDay"},st={key:2,class:"selectDay"},at={key:3,class:"selectDay"},nt={class:"commentBox"},it={key:0,class:"bottomBtBox"},dt=I(()=>e("h5",null,"삭제하기",-1)),ct=I(()=>e("h5",null,"수정하기",-1)),rt={key:1,class:"bottomBtBox"},ut=I(()=>e("h5",null,"저장",-1)),_t={__name:"SavedBookDetailModal",setup(g){const r=U(),t=C(()=>r.selectedSavedBook),y=C(()=>r.showSavedBookModal),v=C(()=>r.selectedSavedBookCategory),w=r.categories,n=M({...t.value}),o=M(v.value),a=M(!1);T(t,m=>{m&&(n.value={...m,reading_page:m.reading_page||""})}),T(v,m=>{o.value=m});const p=()=>{a.value=!0},x=async()=>{try{await r.updateSavedBook(n.value,o.value)}catch(m){console.error("Error updating book:",m),alert("책 업데이트에 실패했습니다.")}finally{r.closeSavedBookModal(),a.value=!1}},D=async()=>{try{await r.deleteSavedBook(n.value.id),alert("책이 삭제되었습니다.")}catch(m){console.error("Error deleting book:",m),alert("책 삭제에 실패했습니다.")}finally{r.closeSavedBookModal(),a.value=!1}},V=()=>{r.closeSavedBookModal(),a.value=!1},B=(m,h)=>!m||!h||h===0?0:Math.floor(m/h*100),S=m=>m?m.split("-")[0]:"";return(m,h)=>{const l=c("v-icon"),P=c("v-spacer"),de=c("v-card-title"),ce=c("v-img"),R=c("v-rating"),re=c("v-progress-linear"),z=c("v-btn"),ue=c("v-card-text"),_e=c("v-card"),pe=c("v-dialog");return s(),b(pe,{modelValue:y.value,"onUpdate:modelValue":h[6]||(h[6]=A=>y.value=A),"max-width":"500","max-height":"850"},{default:d(()=>[i(_e,{style:{"border-radius":"30px","box-shadow":"0 4px 25px #767676",height:"100%"}},{default:d(()=>[i(de,null,{default:d(()=>[i(P,{class:"bookCategory"},{default:d(()=>[i(l,{style:{color:"#A29cfe"}},{default:d(()=>[$("mdi-check")]),_:1}),e("h3",null,u(v.value),1)]),_:1}),i(l,{onClick:V,size:"x-small",style:{position:"absolute",right:"30px",top:"30px"}},{default:d(()=>[$("mdi-close")]),_:1})]),_:1}),i(ue,{class:"bookDetailWrapper"},{default:d(()=>{var A,Q,O,G,J,K,X,Y,Z,ee,te,oe,le,se,ae;return[e("div",we,[e("div",Se,[i(ce,{src:(A=t.value)==null?void 0:A.thumbnail,class:"bookDetailImage","aspect-ratio":"1.5"},null,8,["src"])]),e("div",$e,[e("div",Ce,[e("div",De,[e("h1",null,u((Q=t.value)==null?void 0:Q.title),1),e("h3",null,"작가 : "+u(((O=t.value)==null?void 0:O.authors.join(", "))||"작가 정보 없음"),1)]),e("div",Ve,[e("div",Ie,[e("h4",Me,"발행연도 : "+u(S((G=t.value)==null?void 0:G.datetime)||"정보 없음"),1),e("h4",null,"출판사 : "+u(((J=t.value)==null?void 0:J.publisher)||"정보 없음"),1)]),e("h4",null,"ISBN : "+u((K=t.value)==null?void 0:K.isbn),1)])]),v.value==="다 읽은 책"?(s(),_("h3",Te,[v.value==="다 읽은 책"?(s(),b(R,{key:0,"model-value":(X=t.value)==null?void 0:X.rating,density:"compact","background-color":"purple",color:"deep-purple-lighten-3",length:"5","half-increments":"",readonly:"",style:{"padding-left":"-2px"}},null,8,["model-value"])):f("",!0),$(" ( "+u((Y=t.value)==null?void 0:Y.rating)+" / 5 ) ",1)])):f("",!0),v.value==="읽는 중인 책"?(s(),_("div",Ne,[i(re,{"model-value":B(t.value.reading_page,t.value.pages),"bg-color":"deep-purple-lighten-3",color:"deep-purple-lighten-1",height:"14",style:{"border-radius":"50px"}},null,8,["model-value"]),e("h3",Ue,u(((Z=t.value)==null?void 0:Z.reading_page)||0)+" / "+u(((ee=t.value)==null?void 0:ee.pages)||0),1)])):f("",!0)])]),a.value?(s(),_("div",je,[e("div",Le,[(s(!0),_(W,null,E(he(w),k=>(s(),b(z,{key:k,onClick:Qt=>o.value=k,class:me(["categoryBtn",{selectedCategory:o.value===k}])},{default:d(()=>[e("h3",null,u(k),1)]),_:2},1032,["onClick","class"]))),128))]),e("div",We,[o.value==="다 읽은 책"?(s(),_("div",Ee,[ze,i(R,{modelValue:n.value.rating,"onUpdate:modelValue":h[0]||(h[0]=k=>n.value.rating=k),density:"compact","background-color":"purple",color:"deep-purple-lighten-3",length:"5",size:"x-large","half-increments":"",clearable:""},null,8,["modelValue"])])):f("",!0),e("div",Ae,[e("div",Fe,[o.value!=="읽고 싶은 책"?(s(),_("div",He,[qe,o.value!=="읽고 싶은 책"?j((s(),_("input",{key:0,"onUpdate:modelValue":h[1]||(h[1]=k=>n.value.start_date=k),type:"date",dense:"",class:"mt-4 selectDay",id:"modalStartDate",style:{width:"100%",display:"block"}},null,512)),[[L,n.value.start_date]]):f("",!0)])):f("",!0),o.value==="다 읽은 책"?(s(),_("div",Pe,[Re,o.value==="다 읽은 책"?j((s(),_("input",{key:0,"onUpdate:modelValue":h[2]||(h[2]=k=>n.value.end_date=k),type:"date",dense:"",class:"mt-4 selectDay",id:"modalEndDate",style:{width:"100%",display:"block"}},null,512)),[[L,n.value.end_date]]):f("",!0)])):f("",!0),o.value==="읽는 중인 책"?(s(),_("div",Qe,[j(e("input",{"onUpdate:modelValue":h[3]||(h[3]=k=>n.value.reading_page=k),placeholder:"읽은",dense:"",class:"mt-4 pageInput",id:"modalReadingPage"},null,512),[[L,n.value.reading_page]]),$("쪽 ")])):f("",!0),o.value!=="읽고 싶은 책"?(s(),_("div",Oe,[j(e("input",{"onUpdate:modelValue":h[4]||(h[4]=k=>n.value.pages=k),dense:"",class:"mt-4 pageInput",id:"modalPages",placeholder:"전체"},null,512),[[L,n.value.pages]]),$("쪽 ")])):f("",!0)]),e("div",Ge,[j(e("textarea",{"onUpdate:modelValue":h[5]||(h[5]=k=>n.value.comment=k),dense:"",class:"mt-4",id:"modalComment",style:{width:"100%","margin-top":"16px !important",padding:"0 16px 16px"},placeholder:"감상평을 작성해 주세요"},null,512),[[L,n.value.comment]])])])])])):(s(),_("div",Je,[e("div",Ke,[e("div",Xe,[v.value==="읽는 중인 책"||v.value==="다 읽은 책"?(s(),_("div",Ye,[Ze,e("div",et,[i(l,{style:{"font-size":"18px","font-weight":"600"}},{default:d(()=>[$("mdi-calendar-blank")]),_:1}),e("h3",null,u(((te=t.value)==null?void 0:te.start_date)||"연도-월-일"),1)])])):f("",!0),v.value==="다 읽은 책"?(s(),_("div",tt,[ot,e("div",lt,[i(l,{style:{"font-size":"18px","font-weight":"600"}},{default:d(()=>[$("mdi-calendar-blank")]),_:1}),e("h3",null,u(((oe=t.value)==null?void 0:oe.end_date)||"연도-월-일"),1)])])):f("",!0),v.value==="읽는 중인 책"?(s(),_("div",st,[e("h3",null,u(((le=t.value)==null?void 0:le.reading_page)||0)+"쪽",1)])):f("",!0),v.value==="읽는 중인 책"||v.value==="다 읽은 책"?(s(),_("div",at,[e("h3",null,u(((se=t.value)==null?void 0:se.pages)||0)+"쪽",1)])):f("",!0)]),e("div",nt,[e("h4",null,u(((ae=t.value)==null?void 0:ae.comment)||"작성된 감상평이 없습니다."),1)])])]))]}),_:1}),a.value?f("",!0):(s(),_("div",it,[i(z,{onClick:D,class:"mt-4 bottomBt deleteBt"},{default:d(()=>[dt]),_:1}),i(z,{color:"#A29cfe",onClick:p,class:"mt-4 bottomBt"},{default:d(()=>[ct]),_:1})])),a.value?(s(),_("div",rt,[i(z,{color:"#A29cfe",onClick:x,class:"mt-4 saveBt"},{default:d(()=>[ut]),_:1})])):f("",!0)]),_:1})]),_:1},8,["modelValue"])}}},pt=N(_t,[["__scopeId","data-v-fb6a8dac"]]),vt=g=>(H("data-v-6dc286ff"),g=g(),q(),g),ht={style:{width:"100%",display:"flex","flex-direction":"column","justify-content":"space-between",padding:"8px 0"}},mt={style:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical"}},gt={style:{display:"flex","flex-direction":"column",gap:"4px"}},yt={style:{display:"flex","flex-direction":"row",gap:"16px"}},ft={style:{"padding-right":"12px","box-shadow":"5px 0 0 -3px #999"}},xt={key:1,style:{width:"100%",display:"flex","align-items":"center","justify-content":"space-between",gap:"12px"}},kt=vt(()=>e("h3",null,"저장된 책이 없습니다.",-1)),Bt={__name:"BookList",props:{category:{type:String,required:!0}},setup(g){const r=U(),t=g,y=C(()=>{var o,a,p;return t.category==="읽고 싶은 책"?((o=r.books)==null?void 0:o.wantToRead)||[]:t.category==="읽는 중인 책"?((a=r.books)==null?void 0:a.reading)||[]:t.category==="다 읽은 책"?((p=r.books)==null?void 0:p.finished)||[]:[]}),v=(o,a)=>{r.selectSavedBook(o,a)},w=(o,a)=>!a||a===0?0:Math.floor(o/a*100);F(()=>{r.loadBooks()}),T(()=>t.category,()=>{r.loadBooks()});const n=o=>o?o.split("-")[0]:"";return(o,a)=>{const p=c("v-img"),x=c("v-card-text"),D=c("v-rating"),V=c("v-progress-linear"),B=c("v-card"),S=c("v-col"),m=c("v-row"),h=c("v-container");return s(),b(h,{style:{padding:"0.5%","max-width":"2000px"}},{default:d(()=>[y.value&&y.value.length?(s(),b(m,{key:0,style:{display:"grid","grid-template-columns":"repeat(auto-fill, minmax(460px, 1fr))"}},{default:d(()=>[(s(!0),_(W,null,E(y.value,l=>(s(),b(S,{key:l.isbn,style:{padding:"8px"}},{default:d(()=>[i(B,{onClick:P=>v(l,t.category),class:"bookCard"},{default:d(()=>[i(x,{class:"bookThumbnail"},{default:d(()=>[i(p,{src:l.thumbnail},null,8,["src"])]),_:2},1024),e("div",ht,[e("div",null,[e("p",mt,u(l.title),1),e("h3",null,u(l.authors.join(", ")||"작가 정보 없음"),1)]),e("div",gt,[e("div",yt,[e("h4",ft,"발행연도 : "+u(n(l==null?void 0:l.datetime)||"정보 없음"),1),e("h4",null,"출판사 : "+u((l==null?void 0:l.publisher)||"정보 없음"),1)]),e("h4",null,"ISBN: "+u(l==null?void 0:l.isbn),1)]),t.category==="다 읽은 책"?(s(),b(D,{key:0,"model-value":l.rating,density:"compact","background-color":"purple",color:"deep-purple-lighten-3",length:"5","half-increments":"",readonly:""},null,8,["model-value"])):f("",!0),t.category==="읽는 중인 책"?(s(),_("div",xt,[i(V,{"model-value":w(l.reading_page,l.pages),color:"deep-purple-lighten-3",height:"14","bg-color":"grey lighten-4",style:{"border-radius":"50px"}},null,8,["model-value"]),e("h3",null,"("+u(w(l.reading_page,l.pages))+"%)",1)])):f("",!0)])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):(s(),b(m,{key:1},{default:d(()=>[i(S,{style:{display:"flex","justify-content":"center",padding:"80px 0"}},{default:d(()=>[kt]),_:1})]),_:1})),i(pt)]),_:1})}}},bt=N(Bt,[["__scopeId","data-v-6dc286ff"]]),wt=g=>(H("data-v-721b0d17"),g=g(),q(),g),St={style:{width:"100%",display:"flex","flex-direction":"column","justify-content":"space-between",padding:"4px 0 8px 0"}},$t={style:{display:"flex",gap:"6px","padding-bottom":"6px","align-items":"center"}},Ct={style:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical"}},Dt={style:{display:"flex","flex-direction":"column",gap:"4px"}},Vt={style:{display:"flex","flex-direction":"row",gap:"16px"}},It={style:{"padding-right":"12px","box-shadow":"5px 0 0 -3px #999"}},Mt=wt(()=>e("h3",null,"검색 결과가 없습니다.",-1)),Tt={__name:"SearchSavedBook",setup(g){const r=M(""),t=U(),y=M([]);T(r,()=>{v()});const v=()=>{if(!r.value.trim()){y.value=[];return}const o=r.value.toLowerCase();y.value=t.books.all.filter(a=>a.title.toLowerCase().includes(o)||Array.isArray(a.authors)&&a.authors.some(p=>p.toLowerCase().includes(o)))},w=o=>{t.selectSavedBook(o,o.category)},n=o=>o?o.split("-")[0]:"";return(o,a)=>{const p=c("v-text-field"),x=c("v-img"),D=c("v-card-text"),V=c("v-icon"),B=c("v-card"),S=c("v-col"),m=c("v-row"),h=c("v-container");return s(),b(h,{class:"searchBox",style:{"max-width":"2000px",margin:"0",padding:"8px 0"}},{default:d(()=>[i(p,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=l=>r.value=l),label:"책 이름 또는 저자명으로 검색",rounded:"",dense:"",clearable:"",onInput:v,"prepend-inner-icon":"mdi-magnify","append-inner-icon":"mdi-arrow-right",class:"userInput",style:{width:"100%"}},null,8,["modelValue"]),y.value.length?(s(),b(m,{key:0,class:"saveBookBox",style:{display:"grid","grid-template-columns":"repeat(auto-fill, minmax(460px, 1fr))"}},{default:d(()=>[(s(!0),_(W,null,E(y.value,l=>(s(),b(S,{key:l.id,style:{padding:"8px"}},{default:d(()=>[i(B,{class:"bookCard",onClick:P=>w(l)},{default:d(()=>[i(D,{class:"bookThumbnail"},{default:d(()=>[i(x,{src:l.thumbnail},null,8,["src"])]),_:2},1024),e("div",St,[e("div",null,[e("div",$t,[i(V,{style:{color:"#A29cfe"}},{default:d(()=>[$("mdi-check")]),_:1}),e("h4",null,u(l.category),1)]),e("p",Ct,u(l.title),1),e("h3",null,u(l.authors.join(", ")||"작가 정보 없음"),1)]),e("div",Dt,[e("div",Vt,[e("h4",It,"발행연도 : "+u(n(l==null?void 0:l.datetime)||"정보 없음"),1),e("h4",null,"출판사 : "+u((l==null?void 0:l.publisher)||"정보 없음"),1)]),e("h4",null,"ISBN: "+u(l==null?void 0:l.isbn),1)])])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):r.value?(s(),b(m,{key:1,class:"saveBookBox"},{default:d(()=>[i(S,{style:{display:"flex","justify-content":"center",padding:"40px"}},{default:d(()=>[Mt]),_:1})]),_:1})):f("",!0)]),_:1})}}},Nt=N(Tt,[["__scopeId","data-v-721b0d17"]]),Ut={class:"tabs"},jt={__name:"BookTabs",setup(g){const r=U(),t=M(0),y=["다 읽은 책","읽는 중인 책","읽고 싶은 책"],v=C(()=>{var o,a,p;const n=r.books;return{"읽고 싶은 책":((o=n==null?void 0:n.wantToRead)==null?void 0:o.length)||0,"읽는 중인 책":((a=n==null?void 0:n.reading)==null?void 0:a.length)||0,"다 읽은 책":((p=n==null?void 0:n.finished)==null?void 0:p.length)||0}}),w=C(()=>{const n=y[t.value];return v.value[n]});return F(()=>{r.loadBooks()}),T(t,()=>{r.loadBooks()}),(n,o)=>{const a=c("v-tab"),p=c("v-tabs"),x=c("v-tab-item"),D=c("v-tabs-items"),V=c("v-container");return s(),b(V,{class:"myBook"},{default:d(()=>[e("div",Ut,[i(p,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=B=>t.value=B),"show-arrows":"",color:"deep-purple-lighten-2",class:"menuBox"},{default:d(()=>[(s(),_(W,null,E(y,(B,S)=>i(a,{key:S,class:"menu"},{default:d(()=>[e("h3",null,u(B),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),e("h3",null,u(w.value)+"권의 책 저장중",1)]),i(D,{modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=B=>t.value=B)},{default:d(()=>[i(x,null,{default:d(()=>[i(Nt)]),_:1}),i(x,null,{default:d(()=>[i(bt,{category:y[t.value]},null,8,["category"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},Lt=N(jt,[["__scopeId","data-v-52eedb80"]]),ie=g=>(H("data-v-ea44f942"),g=g(),q(),g),Wt={class:"main01"},Et={class:"txtBox"},zt={style:{display:"flex",gap:"8px"}},At=ie(()=>e("h3",null,"나의 책장",-1)),Ft={class:"title"},Ht={class:"userName"},qt=ie(()=>e("div",{class:"subTitle"},[e("h2",{class:"brandName"},"Bookeep"),e("h2",{style:{"padding-right":"6px"}},"과 함께 한 권의 책이 열어주는"),e("h2",null,"새로운 세상을 만나 보세요. ")],-1)),Pt={class:"contentBox"},Rt={__name:"Home",setup(g){const r=ge(),t=U(),y=C(()=>r.userName);C(()=>t.books);const v=C(()=>t.isLoggedIn);return F(()=>{t.loadBooks()}),(w,n)=>{const o=c("v-icon");return s(),_("div",Wt,[e("div",Et,[e("div",zt,[i(o,null,{default:d(()=>[$("mdi-home")]),_:1}),At]),e("div",Ft,[e("h1",null,[e("span",Ht,u(y.value),1),$("님,")]),qt])]),e("div",Pt,[v.value?(s(),b(be,{key:0,class:"BookShelf"})):f("",!0),i(Lt,{class:"BookTabs"})])])}}},Gt=N(Rt,[["__scopeId","data-v-ea44f942"]]);export{Gt as default};
