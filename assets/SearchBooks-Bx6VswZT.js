import{_ as F,z as de,u as X,c as b,f as V,w as ie,g as d,a as n,h as $,i as s,j as a,k as z,m as _,d as e,t as m,b as v,F as Y,e as Z,p as ce,l as g,q as T,v as j,A as H,B as ee,s as te,x as le,o as ue,C as re}from"./index-BrUh7qc-.js";const L=h=>(te("data-v-0663b6db"),h=h(),le(),h),pe=L(()=>e("h3",null,"새로운 책",-1)),_e={class:"DataBox",style:{display:"flex",gap:"32px","flex-direction":"row"}},ve={style:{display:"flex","align-items":"center"}},me={class:"bookData"},he={style:{display:"flex","flex-direction":"column",gap:"4px"}},xe={class:"bookSubData"},ye={style:{display:"flex","flex-wrap":"wrap",gap:"4px"}},ge={style:{display:"flex","flex-direction":"row",gap:"16px"}},fe={style:{"padding-right":"12px","box-shadow":"5px 0 0 -3px #999"}},ke={class:"bookDetailTxt"},we={class:"category-buttons mt-4"},be={style:{display:"flex","flex-direction":"column",gap:"6px",width:"100%"}},Be={key:0,class:"rating",style:{display:"flex","flex-direction":"column",width:"100%",gap:"6px","margin-top":"32px"}},De=L(()=>e("h4",{style:{color:"#999"}},"책의 평점을 남겨주세요.",-1)),Ce={class:"bookCustomBox",style:{display:"flex","flex-direction":"column",gap:"12px",width:"100%"}},Se={class:"bookDayBox"},Ve={key:0,style:{flex:"1 1 0",display:"flex","flex-direction":"column",gap:"8px"}},$e=L(()=>e("h4",null,"독서 시작일",-1)),Ie={key:1,style:{flex:"1 1 0",display:"flex","flex-direction":"column",gap:"8px"}},Me=L(()=>e("h4",null,"독서 종료일",-1)),Ue={key:2,class:"selectDay",style:{width:"100px"}},Ne={key:3,class:"selectDay",style:{width:"100px"}},Te={class:"commentBox",style:{padding:"0"}},je={class:"bottomBtBox"},ze=L(()=>e("h5",null,"저장",-1)),Le={__name:"BookDetailModal",setup(h){const x=de(),t=X(),u=b(()=>t.selectedBook),I=b({get:()=>t.showModal,set:p=>{p||t.closeModal()}}),B=b(()=>t.categories),f=p=>b({get:()=>t[p],set:l=>{t[p]=l}}),D=f("pages"),C=f("comment"),r=f("selectedCategory"),k=V(""),i=V(""),y=V(0),w=V("");ie(()=>t.selectedBook,p=>{p?(k.value=t.startDate,i.value=t.endDate,w.value=t.readingPage||"",y.value=t.rating||0):(k.value="",i.value="",w.value="",y.value=0)});const P=t.closeModal,M=async()=>{const{data:p}=await ee.auth.getSession(),l=p.session;if(!l){x.push("/BeforeLogin");return}const S={user_id:l.user.id,title:u.value.title,publisher:u.value.publisher,datetime:u.value.datetime,thumbnail:u.value.thumbnail,authors:JSON.stringify(u.value.authors),isbn:u.value.isbn,pages:D.value,reading_page:w.value,comment:C.value,start_date:k.value===""?null:k.value,end_date:i.value===""?null:i.value,rating:y.value,category:r.value};try{await t.saveBook(S),t.loadBooks(),P()}catch(N){console.error("Error saving book:",N),alert("책 저장에 실패했습니다.")}},U=p=>p?p.split("-")[0]:"";return(p,l)=>{const S=d("v-icon"),N=d("v-spacer"),o=d("v-card-title"),A=d("v-img"),E=d("v-btn"),oe=d("v-rating"),se=d("v-card-text"),ae=d("v-card"),ne=d("v-dialog");return n(),$(ne,{modelValue:I.value,"onUpdate:modelValue":l[6]||(l[6]=R=>I.value=R),"max-width":"500","max-height":"850"},{default:s(()=>[a(ae,{style:{"border-radius":"30px","box-shadow":"0 4px 25px #767676",height:"100%"}},{default:s(()=>[a(o,null,{default:s(()=>[a(N,{class:"bookCategory"},{default:s(()=>[a(S,{style:{color:"#A29cfe"}},{default:s(()=>[z("mdi-check")]),_:1}),pe]),_:1}),a(S,{onClick:_(P),size:"x-small",style:{position:"absolute",right:"30px",top:"30px"}},{default:s(()=>[z("mdi-close")]),_:1},8,["onClick"])]),_:1}),a(se,{class:"bookDetailWrapper"},{default:s(()=>{var R,K,Q,J,O,W,G;return[e("div",_e,[e("div",ve,[a(A,{src:(R=u.value)==null?void 0:R.thumbnail,class:"bookDetailImage"},null,8,["src"])]),e("div",me,[e("div",he,[e("h1",null,m((K=u.value)==null?void 0:K.title),1),e("h3",null,"작가 : "+m(((J=(Q=u.value)==null?void 0:Q.authors)==null?void 0:J.join(", "))||"작가 정보 없음"),1)]),e("div",xe,[e("div",ye,[e("div",ge,[e("h4",fe,"발행연도 : "+m(U((O=u.value)==null?void 0:O.datetime)||"정보 없음"),1),e("h4",null,"출판사 : "+m(((W=u.value)==null?void 0:W.publisher)||"정보 없음"),1)]),e("h4",null,"ISBN: "+m((G=u.value)==null?void 0:G.isbn),1)])])])]),e("div",ke,[e("div",we,[(n(!0),v(Y,null,Z(B.value,c=>(n(),$(E,{key:c,onClick:lt=>r.value=c,class:ce(["categoryBtn",{selectedCategory:_(r)===c}])},{default:s(()=>[e("h3",null,m(c),1)]),_:2},1032,["onClick","class"]))),128))]),e("div",be,[_(r)==="다 읽은 책"?(n(),v("div",Be,[De,a(oe,{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=c=>y.value=c),"background-color":"purple",color:"deep-purple-lighten-3",density:"compact",length:"5","half-increments":"",clearable:"",style:{"padding-left":"-2px"}},null,8,["modelValue"])])):g("",!0),e("div",Ce,[e("div",Se,[_(r)!=="읽고 싶은 책"?(n(),v("div",Ve,[$e,_(r)!=="읽고 싶은 책"?T((n(),v("input",{key:0,"onUpdate:modelValue":l[1]||(l[1]=c=>k.value=c),label:"독서 시작일",type:"date",dense:"",class:"mt-4 selectDay",id:"modalStartDate",style:{width:"100%",display:"block"}},null,512)),[[j,k.value]]):g("",!0)])):g("",!0),_(r)==="다 읽은 책"?(n(),v("div",Ie,[Me,_(r)==="다 읽은 책"?T((n(),v("input",{key:0,"onUpdate:modelValue":l[2]||(l[2]=c=>i.value=c),type:"date",dense:"",class:"mt-4 selectDay",id:"modalEndDate",style:{width:"100%",display:"block"}},null,512)),[[j,i.value]]):g("",!0)])):g("",!0),_(r)!=="읽고 싶은 책"?(n(),v("div",Ue,[T(e("input",{"onUpdate:modelValue":l[3]||(l[3]=c=>H(D)?D.value=c:null),dense:"",class:"mt-4 pageInput",id:"modalPages",placeholder:"전체"},null,512),[[j,_(D)]]),z("쪽 ")])):g("",!0),_(r)==="읽는 중인 책"?(n(),v("div",Ne,[_(r)==="읽는 중인 책"?T((n(),v("input",{key:0,"onUpdate:modelValue":l[4]||(l[4]=c=>w.value=c),placeholder:"읽은",dense:"",class:"mt-4 pageInput",id:"modalReadingPage"},null,512)),[[j,w.value]]):g("",!0),z("쪽 ")])):g("",!0)])]),e("div",Te,[T(e("textarea",{"onUpdate:modelValue":l[5]||(l[5]=c=>H(C)?C.value=c:null),label:"코멘트",dense:"",class:"mt-4",id:"modalComment",style:{width:"100%","margin-top":"16px !important",padding:"0 16px 16px"},placeholder:"감상평을 작성해 주세요"},null,512),[[j,_(C)]])])])])]}),_:1}),e("div",je,[a(E,{color:"#A29cfe",onClick:M,class:"mt-4 saveBt"},{default:s(()=>[ze]),_:1})])]),_:1})]),_:1},8,["modelValue"])}}},Pe=F(Le,[["__scopeId","data-v-0663b6db"]]),q=h=>(te("data-v-8faca8fc"),h=h(),le(),h),Re={key:0},qe={style:{display:"flex","flex-direction":"column",gap:"48px",padding:"4px 0 18px 0"}},Ae={class:"txtBox"},Ee={style:{display:"flex",gap:"8px","align-items":"center"}},Fe=q(()=>e("h3",null,"검색하기",-1)),Ke=q(()=>e("div",{class:"title"},[e("div",{style:{display:"flex","flex-direction":"column"}},[e("div",{style:{display:"flex",gap:"6px"}},[e("h1",{style:{color:"#a29cfe","letter-spacing":"0","font-size":"48px"}},"Bookeep"),e("h1",null,"과 함께 ")]),e("h1",null,"당신을 기다리는 16만권의 새로운 세상")]),e("div",null,[e("div",{class:"subTitle"},[e("h2",null,"로그인 하고"),e("h2",null,"독서의 새로운 세상을 탐험해보세요.")])])],-1)),Qe=q(()=>e("h3",{style:{padding:"0 8px"}},"검색을 통해 어떤 도서가 있는지 확인해보세요",-1)),Je={style:{width:"100%",display:"flex","flex-direction":"column","justify-content":"space-between",padding:"8px 0"}},Oe={style:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical"}},We={style:{display:"flex","flex-direction":"column",gap:"4px"}},Ge={style:{display:"flex","flex-direction":"row",gap:"16px"}},He={style:{"padding-right":"12px","box-shadow":"5px 0 0 -3px #c4c4c4"}},Xe=q(()=>e("h3",{style:{"text-align":"center",padding:"40px 0"}},"검색 결과가 없습니다.",-1)),Ye={__name:"SearchBook",setup(h){const x=X(),t=V(x.query);b(()=>x.query);const u=b(()=>x.books),I=b(()=>x.showModal),B=V(!1),f=()=>{console.log("searchBooks 호출"),x.setQuery(t.value),x.searchBooks()},D=i=>{x.selectBook(i)},C=i=>i?i.split("-")[0]:"",r=["푸바오","인문학","신춘문예","우주","트렌드"],k=()=>{const i=Math.floor(Math.random()*r.length);return r[i]};return ue(async()=>{const{data:i}=await ee.auth.getSession();B.value=!!i.session,console.log("isLoggedIn:",B.value),B.value||(t.value=k(),console.log("localQuery 설정:",t.value),f())}),(i,y)=>{const w=d("v-icon"),P=d("v-text-field"),M=d("v-col"),U=d("v-row"),p=d("v-img"),l=d("v-card-text"),S=d("v-card"),N=d("v-container");return n(),$(N,null,{default:s(()=>[B.value?g("",!0):(n(),v("div",Re,[e("div",qe,[e("div",Ae,[e("div",Ee,[a(w,null,{default:s(()=>[z("mdi-magnify")]),_:1}),Fe]),Ke]),Qe])])),a(U,{"no-gutters":""},{default:s(()=>[a(M,{cols:" 12"},{default:s(()=>[a(P,{modelValue:t.value,"onUpdate:modelValue":y[0]||(y[0]=o=>t.value=o),onKeyup:re(f,["enter"]),"onClick:prependInner":f,"onClick:appendInner":f,"prepend-inner-icon":"mdi-magnify","append-inner-icon":"mdi-arrow-right",class:"searchField",filled:"",rounded:"",dense:"",placeholder:"책 이름을 입력하세요"},null,8,["modelValue"])]),_:1})]),_:1}),u.value.length>0?(n(),$(U,{key:1,style:{display:"grid","grid-template-columns":`repeat(auto-fill, minmax(460px,
          1fr))`}},{default:s(()=>[(n(!0),v(Y,null,Z(u.value,(o,A)=>(n(),$(M,{key:A,style:{padding:"8px"}},{default:s(()=>[a(S,{class:"bookCard",onClick:E=>D(o),outlined:"",flat:""},{default:s(()=>[a(l,{class:"bookThumbnail"},{default:s(()=>[a(p,{src:o.thumbnail},null,8,["src"])]),_:2},1024),e("div",Je,[e("div",null,[e("p",Oe,m(o.title),1),e("h3",null,m(o.authors.length?o.authors.join(", "):"작가 정보 없음"),1)]),e("div",We,[e("div",Ge,[e("h4",He,"발행연도 : "+m(C(o==null?void 0:o.datetime)||"정보 없음"),1),e("h4",null,"출판사 : "+m((o==null?void 0:o.publisher)||"정보 없음"),1)]),e("h4",null,"ISBN: "+m(o==null?void 0:o.isbn),1)])])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):(n(),$(U,{key:2},{default:s(()=>[a(M,null,{default:s(()=>[Xe]),_:1})]),_:1})),a(Pe,{modelValue:I.value,"onUpdate:modelValue":y[1]||(y[1]=o=>I.value=o)},null,8,["modelValue"])]),_:1})}}},Ze=F(Ye,[["__scopeId","data-v-8faca8fc"]]),et={class:"main01",style:{width:"100%","max-width":"2000px"}},tt={__name:"SearchBooks",setup(h){return(x,t)=>(n(),v("div",et,[a(Ze,{class:"SearchBook"})]))}},st=F(tt,[["__scopeId","data-v-3d334f46"]]);export{st as default};
